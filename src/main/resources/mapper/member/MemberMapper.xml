<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="sandbox.apricot.member.mapper.MemberMapper">

  <resultMap id="memberResultMap" type="sandbox.apricot.member.entity.Member">
    <result property="memberRole" column="MEMBER_ROLE" typeHandler="org.apache.ibatis.type.EnumTypeHandler" javaType="sandbox.apricot.member.entity.MemberRole"/>
  </resultMap>

  <insert id="insertMember" parameterType="sandbox.apricot.member.entity.Member" >
    INSERT INTO MEMBERS (email, nick_name, password, age_range, gender, career, married_status, num_child, member_role)
    VALUES (#{email}, #{nickName}, #{password}, #{ageRange}, #{gender}, #{career}, #{marriedStatus}, #{numChild}, #{memberRole})
  </insert>

  <select id="findByEmail" parameterType="String" resultType="sandbox.apricot.member.entity.Member">
    SELECT member_id, email, nick_name, password, age_range, gender, career, married_status, num_child, member_role
    FROM MEMBERS
    WHERE email = #{email}
  </select>

  <select id="findByNickName" parameterType="String" resultType="sandbox.apricot.member.entity.Member">
    SELECT member_id, email, nick_name, password, age_range, gender, career, married_status, num_child, member_role
    FROM MEMBERS
    WHERE nick_name = #{nickName}
  </select>

</mapper>
